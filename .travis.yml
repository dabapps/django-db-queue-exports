language: python
sudo: false
services:
  - mysql
  - postgresql
python:
- '3.5'
- '3.6'
- '3.7'
- '3.8'
env:
- DJANGO_VERSION=1.11 DATABASE_URL=postgres://postgres@127.0.0.1/dbq
- DJANGO_VERSION=2.2 DATABASE_URL=postgres://postgres@127.0.0.1/dbq
- DJANGO_VERSION=1.11 DATABASE_URL=mysql://root@127.0.0.1/dbq
- DJANGO_VERSION=2.2 DATABASE_URL=mysql://root@127.0.0.1/dbq
install:
- pip install -r tests/requirements.txt
- pip install -U django==$DJANGO_VERSION
- if [ "$TRAVIS_PYTHON_VERSION" != "3.5" ]; then pip install black==19.10b0; fi
script:
  - if [ "$TRAVIS_PYTHON_VERSION" != "3.5" ]; then black --check django_dbq; fi
  - python manage.py test